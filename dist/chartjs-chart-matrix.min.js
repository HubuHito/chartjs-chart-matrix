/*!
 * chartjs-chart-matrix v1.0.0-alpha6
 * https://github.com/kurkle/chartjs-chart-matrix#readme
 * (c) 2020 Jukka Kurkela
 * Released under the MIT license
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js"],e):e((t=t||self).Chart)}(this,(function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?c(t):e}function h(t){return function(){var e,r=a(t);if(l()){var n=a(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return f(this,e)}}function s(t,e){var r=t.getProps(["x","y","width","height"],e),n=r.x,o=r.y;return{left:n,top:o,right:n+r.width,bottom:o+r.height}}function p(t,e,r){return Math.max(Math.min(t,r),e)}function y(e){var r=s(e),n=r.right-r.left,o=r.bottom-r.top,i=function(e,r,n){var o,i,a,u,l=e.options.borderWidth;return t.helpers.isObject(l)?(o=+l.top||0,i=+l.right||0,a=+l.bottom||0,u=+l.left||0):o=i=a=u=+l||0,{t:p(o,0,n),r:p(i,0,r),b:p(a,0,n),l:p(u,0,r)}}(e,n/2,o/2);return{outer:{x:r.left,y:r.top,w:n,h:o},inner:{x:r.left+i.l,y:r.top+i.t,w:n-i.l-i.r,h:o-i.t-i.b}}}function d(t,e,r,n){var o=null===e,i=null===r,a=!(!t||o&&i)&&s(t,n);return a&&(o||e>=a.left&&e<=a.right)&&(i||r>=a.top&&r<=a.bottom)}var g,v,b,w=function(t){i(a,t);var r=h(a);function a(t){var n;return e(this,a),(n=r.call(this)).options=void 0,n.width=void 0,n.height=void 0,t&&o(c(n),t),n}return n(a,[{key:"draw",value:function(t){var e=this.options,r=y(this),n=r.inner,o=r.outer;t.save(),o.w!==n.w||o.h!==n.h?(t.beginPath(),t.rect(o.x,o.y,o.w,o.h),t.clip(),t.rect(n.x,n.y,n.w,n.h),t.fillStyle=e.backgroundColor,t.fill(),t.fillStyle=e.borderColor,t.fill("evenodd")):(t.fillStyle=e.backgroundColor,t.fillRect(n.x,n.y,n.w,n.h)),t.restore()}},{key:"inRange",value:function(t,e,r){return d(this,t,e,r)}},{key:"inXRange",value:function(t,e){return d(this,t,null,e)}},{key:"inYRange",value:function(t,e){return d(this,null,t,e)}},{key:"getCenterPoint",value:function(t){var e=this.getProps(["x","y","width","height"],t),r=e.x,n=e.y;return{x:r+e.width/2,y:n+e.height/2}}},{key:"tooltipPosition",value:function(){return this.getCenterPoint()}},{key:"getRange",value:function(t){return"x"===t?this.width/2:this.height/2}}]),a}((t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t).Element);b="rectangle",(v="_type")in(g=w)?Object.defineProperty(g,v,{value:b,enumerable:!0,configurable:!0,writable:!0}):g[v]=b;var m=function(t){i(o,t);var r=h(o);function o(){return e(this,o),r.apply(this,arguments)}return n(o,[{key:"update",value:function(t){var e=this._cachedMeta;this.updateElements(e.data,0,t)}},{key:"updateElements",value:function(t,e,r){for(var n=this,o="reset"===r,i=n._cachedMeta,a=i.xScale,u=i.yScale,l=n.resolveDataElementOptions(e,r),c=n.getSharedOptions(r,t[e],l),f=0;f<t.length;f++){var h=e+f,s=!o&&n.getParsed(h),p=o?a.getBasePixel():a.getPixelForValue(s.x),y=o?u.getBasePixel():u.getPixelForValue(s.y),d=n.resolveDataElementOptions(f,r),g=d.width,v=d.height,b=d.anchorX,w=d.anchorY,m={x:"left"===b?p:p-g/("right"===b?1:2),y:"top"===w?y:y-v/("bottom"===w?1:2),width:g,height:v,options:d};n.updateElement(t[f],h,m,r)}n.updateSharedOptions(c,r)}},{key:"draw",value:function(){var t,e,r=this.getMeta().data||[];for(t=0,e=r.length;t<e;++t)r[t].draw(this._ctx)}}]),o}(t.DatasetController);m.prototype.dataElementType=w,m.prototype.dataElementOptions=["backgroundColor","borderColor","borderWidth","anchorX","anchorY","width","height"],t.controllers.matrix=m,t.defaults.matrix={hover:{mode:"nearest",intersect:!0},datasets:{animation:{numbers:{type:"number",properties:["x","y","width","height"]}},anchorX:"center",anchorY:"center"},tooltips:{mode:"nearest",intersect:!0},scales:{x:{type:"linear",offset:!0},y:{type:"linear",reverse:!0}},elements:{rectangle:{width:20,height:20}}}}));
